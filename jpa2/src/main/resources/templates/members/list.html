<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Member List</title>

    <style>
        :root{
            --bg:#f6f7fb;
            --card:#ffffff;
            --text:#0f172a;
            --muted:#64748b;
            --line:#e2e8f0;
            --primary:#2563eb;
            --danger:#ef4444;
            --shadow:0 16px 40px rgba(15,23,42,.08);
            --radius:18px;
        }
        *{box-sizing:border-box}
        body{
            margin:0;
            font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans KR", sans-serif;
            color:var(--text);
            background:
                    radial-gradient(1200px 600px at 15% 10%, #e8ecff 0%, transparent 60%),
                    radial-gradient(1000px 600px at 85% 15%, #dff2ff 0%, transparent 55%),
                    linear-gradient(180deg, #f7f8ff, var(--bg));
            min-height:100vh;
        }
        .wrap{max-width:980px; margin:0 auto; padding:28px 18px 60px;}
        .top{
            display:flex; align-items:flex-end; justify-content:space-between; gap:12px;
            margin-bottom:14px;
        }
        h1{margin:0; font-size:28px; letter-spacing:-.3px;}
        .sub{margin:6px 0 0; color:var(--muted); font-size:14px;}
        .card{
            background:var(--card);
            border:1px solid rgba(226,232,240,.85);
            border-radius:var(--radius);
            box-shadow:var(--shadow);
            overflow:hidden;
        }
        .toolbar{
            display:flex; justify-content:space-between; align-items:center; gap:10px;
            padding:14px 16px;
            border-bottom:1px solid var(--line);
            background:linear-gradient(180deg, rgba(255,255,255,.95), rgba(255,255,255,.85));
            backdrop-filter: blur(6px);
        }
        .btn{
            border:none; cursor:pointer;
            padding:10px 12px;
            border-radius:14px;
            font-weight:700;
            font-size:14px;
            transition:.15s ease;
            display:inline-flex; align-items:center; gap:8px;
            text-decoration:none;
        }
        .btn-primary{background:var(--primary); color:#fff;}
        .btn-primary:hover{filter:brightness(.95)}
        .btn-ghost{
            background:#fff; color:var(--text);
            border:1px solid var(--line);
        }
        .btn-ghost:hover{background:#f8fafc}
        .btn-danger{
            background:#fff; color:var(--danger);
            border:1px solid rgba(239,68,68,.35);
        }
        .btn-danger:hover{background:rgba(239,68,68,.06)}
        table{width:100%; border-collapse:separate; border-spacing:0}
        thead th{
            text-align:left;
            font-size:12px;
            color:var(--muted);
            font-weight:900;
            letter-spacing:.08em;
            text-transform:uppercase;
            padding:12px 14px;
            border-bottom:1px solid var(--line);
            background:#fbfdff;
        }
        tbody td{
            padding:14px;
            border-bottom:1px solid rgba(226,232,240,.7);
            font-size:14px;
            vertical-align:middle;
        }
        tbody tr:hover{background:#fafcff}
        .mono{font-variant-numeric: tabular-nums; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;}
        .actions{display:flex; gap:8px; justify-content:flex-end; flex-wrap:wrap}
        .empty{
            padding:44px 18px;
            text-align:center;
            color:var(--muted);
        }
        @media (max-width:720px){
            .actions{justify-content:flex-start}
            .toolbar{flex-direction:column; align-items:stretch}
        }

        .pagination-bar{
            display:flex; justify-content:space-between; align-items:center; gap:10px;
            padding:14px 16px;
            border-top:1px solid var(--line);
            background:#fbfdff;
        }
        .pagination{
            display:flex; gap:6px; flex-wrap:wrap; align-items:center;
        }
        .page-btn{
            padding:8px 10px;
            border-radius:12px;
            border:1px solid var(--line);
            background:#fff;
            color:var(--text);
            text-decoration:none;
            font-weight:800;
            font-size:13px;
            min-width:40px;
            text-align:center;
        }
        .page-btn:hover{background:#f8fafc}
        .page-btn.active{
            background:#0f172a; color:#fff; border-color:#0f172a;
        }
        .meta{
            color:var(--muted);
            font-size:13px;
        }
    </style>
</head>

<!--/*@thymesVar id="memberList" type="org.springframework.data.domain.Page<com.example.jpa2.domain.Member>"*/-->
<body>
<div class="wrap">
    <div class="top">
        <div>
            <h1>Members</h1>
            <p class="sub">심플 CRUD — 리스트/등록/수정/삭제만.</p>
        </div>

        <a class="btn btn-primary" th:href="@{/members/new}">
            + 새 회원 등록
        </a>
    </div>

    <div class="card">
        <div class="toolbar">
            <div style="color:var(--muted); font-size:13px;">
                총 <b th:text="${memberList.totalElements}">0</b>명
            </div>
            <a class="btn btn-ghost" th:href="@{/members/list}">새로고침</a>
        </div>

        <div th:if="${memberList.empty}" class="empty">
            아직 등록된 회원이 없어요. <b>+ 새 회원 등록</b>으로 시작해보세요.
        </div>

        <div th:unless="${memberList.empty}">
            <table>
                <thead>
                <tr>
                    <th style="width:90px">ID</th>
                    <th style="width:140px">NAME</th>
                    <th style="width:90px">AGE</th>
                    <th>ADDRESS</th>
                    <th style="width:180px">PHONE</th>
                    <th style="width:220px; text-align:right">ACTIONS</th>
                </tr>
                </thead>

                <tbody>
                <tr th:each="m : ${memberList.content}">
                    <td class="mono" th:text="${m.memberId}">1</td>
                    <td style="font-weight:800" th:text="${m.name}">홍길동</td>
                    <td class="mono" th:text="${m.age}">20</td>
                    <td th:text="${m.address}">-</td>
                    <td class="mono" th:text="${m.phone}">010-0000-0000</td>
                    <td>
                        <div class="actions">
                            <a class="btn btn-ghost" th:href="@{/members/edit/{id}(id=${m.memberId})}">수정</a>

                            <form th:action="@{/members/delete/{id}(id=${m.memberId})}"
                                  method="post"
                                  style="margin:0"
                                  onsubmit="return confirm('정말 삭제할까요?');">
                                <button class="btn btn-danger" type="submit">삭제</button>
                            </form>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>

            <div class="pagination-bar" th:if="${memberList.totalPages > 1}">
                <div class="meta">
                    <span th:text="${memberList.number + 1}">1</span> / <span th:text="${memberList.totalPages}">1</span> 페이지
                    · 현재 <b th:text="${memberList.numberOfElements}">0</b>건
                </div>

                <div class="pagination">
                    <!-- 이전 -->
                    <a class="page-btn"
                       th:if="${memberList.hasPrevious()}"
                       th:href="@{/members/list(page=${memberList.number - 1}, size=${memberList.size})}">‹</a>

                    <!-- 페이지 번호 (현재 기준 앞뒤 2개만) -->
                    <a class="page-btn"
                       th:each="p : ${#numbers.sequence(0, memberList.totalPages - 1)}"
                       th:if="${p >= memberList.number - 2 && p <= memberList.number + 2}"
                       th:classappend="${p == memberList.number} ? ' active' : ''"
                       th:href="@{/members/list(page=${p}, size=${memberList.size})}"
                       th:text="${p + 1}">1</a>

                    <!-- 다음 -->
                    <a class="page-btn"
                       th:if="${memberList.hasNext()}"
                       th:href="@{/members/list(page=${memberList.number + 1}, size=${memberList.size})}">›</a>
                </div>
            </div>

        </div>
    </div>
</div>
</body>
</html>
